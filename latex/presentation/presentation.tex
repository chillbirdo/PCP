\documentclass{beamer}
\usepackage{beamerthemesplit} % new 
\usepackage[utf8x]{inputenc}
\usepackage[ngerman]{babel} 

\usepackage{epsfig}
\usepackage{amsmath}
\usepackage{placeins}
\usepackage{float}

\usepackage{algorithmic}
\usepackage[linesnumbered,ruled,vlined]{algorithm2e}


\begin{document}
\title{A Hybrid Algorithm for the Partition Coloring Problem} 
\author{Gilbert Fritz} 
\date{\today} 

\frame{\titlepage} 

\frame{

\begin{table}
\frametitle{Instances with different size}
\resizebox{\columnwidth}{!}{%

\begin{tabular}{|l|l||l|l|l||l|l|l||l|l|l||l|l|l|}
\hline
\multicolumn{2}{|l||}{Instance set}&\multicolumn{3}{l||}{Random}&\multicolumn{3}{|l|}{OneStepCD}&\multicolumn{3}{|l|}{ILP1}&\multicolumn{3}{|l|}{ILP2}\\
\cline{1-14}
 nodes & density   & $\overline{obj}$ & $sd$ & $\overline{time}$  & $\overline{obj}$ & $sd$ & $\overline{time}$  & $\overline{obj}$ & $sd$ & $\overline{time}$  & $\overline{obj}$ & $sd$ & $\overline{time}$\\
\hline
20 & 0.5   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
40 & 0.5   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
60 & 0.5   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
70 & 0.5   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
80 & 0.5   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
90 & 0.5   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
100 & 0.5   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
120 & 0.5   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
\hline
\end{tabular}
}
\end{table}
}

\begin{frame}
\frametitle{Instances with different density}

\begin{table}
\resizebox{\columnwidth}{!}{%
\begin{tabular}{|l|l||l|l|l||l|l|l||l|l|l||l|l|l|}
\hline
\multicolumn{2}{|l||}{Instance set}&\multicolumn{3}{l||}{Random}&\multicolumn{3}{|l|}{OneStepCD}&\multicolumn{3}{|l|}{ILP1}&\multicolumn{3}{|l|}{ILP2}\\
\cline{1-14}
 nodes & density   & $\overline{obj}$ & $sd$ & $\overline{time}$  & $\overline{obj}$ & $sd$ & $\overline{time}$  & $\overline{obj}$ & $sd$ & $\overline{time}$  & $\overline{obj}$ & $sd$ & $\overline{time}$\\
\hline
90 & 0.1   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
90 & 0.2   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
90 & 0.3   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
90 & 0.4   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
90 & 0.5   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
90 & 0.6   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
90 & 0.7   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
90 & 0.8   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
90 & 0.9   & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2  & \textbf{3.0} & 0.0 & 12.2   & \textbf{3.0} & 0.0 & 12.2\\
\hline
\end{tabular}
}
\end{table}
\end{frame}

\frame{\frametitle{Table of contents}\tableofcontents} 


\section{Problem Description} 
\subsection{Partition Coloring Problem}
\frame{\frametitle{Partition Coloring Problem}
\begin{itemize}
\item given $G = (V, E)$
\item let $V_1, V_2,\ldots, V_q$ be a partition of $V$ into $q$ disjoint subsets
\item find a subset $V' \subset V$ such that $|V' \cap V_i| = 1, \forall i = 1, \ldots , q$ (i.e., $V'$ contains one
node from each component $V_i$)
\item find a coloring on the induced graph, such that the chromatic number of the graph induced in $G$ by $V'$ is minimum.  \item Proof of Li and Simha has shown that PCP is $\mathcal{NP}$-complete.
\end{itemize}
}
\frame{\frametitle{Partition Coloring Problem}
\includegraphics[scale=0.3]{pcp.png}
}


%TODO noch mehr Ã¼ber alle papers schreiben
\section{Existing Works} 
\frame{
\frametitle{Exact methods}
Exact:
\begin{enumerate}
\item Frota, Ribiero (2010): Branch-And-Cut %algorithm based on a formulation by representative vertices
\item Hoshino, Souza, Frota (2011): Branch-And-Price
\end{enumerate}
Heuristics:
\begin{enumerate}
\item Li, Shima (2000): Group of heuristics based on extensions of classical methods for the vertex coloring problem
\item Noronha, Ribiero (2006): Tabusearch
\item Hu, Raidl, Pop (2013): Memetic algorithm
\end{enumerate}
}

\section{My Approach}
\subsection{Overview}
\frame{\frametitle{Algorithm Overview}
\begin{enumerate}
\item Create initial solution: OneStepCD
\item For each set $U$ of vertices of same color $c$: recolor without using $c$ by $\{RANDOM, OneStepCD, ILP1, ILP2\}$
\item Sort the solutions by amount of conflicts.
\item For each solution try to eliminate conflicts by using tabusearch. Put each vertex-color-pair on the tabulist for a specified amount of iterations. 
\item If all the conflicts could be eliminated, go back to 2, else return the latest feasible solution.
\end{enumerate}
}

\subsection{Initial Solution}
\begin{frame}
\frametitle{Initial Solution: OneStepCD}
  \begin{algorithm}[H]
  \scriptsize
  \KwIn{An uncolored Graph $G=(V,E)$}
  \KwOut{A feasible Coloring $V'$}
  Remove from G all edges $(i,j) \in E$ : $i,j \in V_k$ for some $k=1,\ldots,q$\; 
  Set $V' \gets \emptyset $\;
  \While{$|V'| < q$} {
    Set $X \gets \emptyset $\;
    \For{$k=1,\ldots,q$ : $V_k \cap V'=0$}{
      Set $X \gets X \cup argmin\{CD(i) : i \in V_k\}$\; 
    }
    Set $x \gets argmax\{CD(i) : i \in X \}$\;
    Set $V' \gets V' \cup \{x\}$\;
    Assign the minimum possible colour to x\;
    Remove from G all nodes in $V_{c(x)} \setminus \{x\} $\;
  }
  \Return{$V'$}\;
  \caption{{\sc OneStepCD}}
  \label{algo:osdc}
  \end{algorithm}
\end{frame}

\FloatBarrier
\subsection{Reselecting/Recoloring subgraphs}
\begin{frame}
\frametitle{Random Recoloring}
\begin{enumerate}
\item Nodes are reselected and recolored randomly.
\end{enumerate}

\end{frame}

\frame{\frametitle{Recoloring with OneStepCD}
\begin{algorithm}[H]
\scriptsize
\KwIn{A partial Solution $P$, a number of maximum colours $cmax$ }
\KwOut{A feasible Solution $S$}
Let $U$ be the set of uncolored nodes in $P$\;
Set $S \gets \emptyset$\;
\While{$|U| > 0$} {
  Set $X \gets \emptyset $\;
  \For{ $u \in U$}{
    $X \gets X \cup argmin\{CD(i) : i \in V_{c(u)}\}$\; 
  }
  Set $x \gets argmax\{CD(i) : i \in X \}$\;
  Set $cmin \gets$ the minimum possible colour that can be assigned to x\;
  \If{$cmin \geq cmax$}{
    $cmin \gets$ the color that produces the fewest conflicts.
  }
  Assign $cmin$ to $x$\;
  $S \gets S \cup \{x\}$\;
  $U \gets U \setminus V_{c(x)}$\;
}
\Return{$V'$}\;
\caption{{\sc OneStepCD Recoloring}}
\label{algo:osdc2}
\end{algorithm}
}
\frame{\frametitle{Recoloring with ILP1}

Let $Q = {Q_1,\ldots,Q_q}$ be the set of Clusters. Every cluster $Q_p$ consists of a set of nodes. Let $C=\{1,\ldots,cmax\}$ be the
set of allowed colors. Let $M$ be a 3-dimensional array of constants, storing
for every cluster $p \in Q$, the number conflicts that would occur by selecting the pair $(v \in Q_p, c \in C)$.
$E$ denotes the set of edges and $P[v]$ the cluster of node $v$.


\begin{equation*}
\scriptsize
\begin{aligned}
& \underset{X}{\text{minimize}} && \sum_{p \in Q}\sum_{v \in Q_p}\sum_{c \in C} X_{pvc} * M_{pvc}                    &&&(1)\\
& \text{subject to} && \sum_{v \in Q_p}\sum_{c \in C} X_{pvc}=1, && \forall p \in Q    &(2)\\
&&& X_{pvc}+X_{quc} \leq 1, && \forall ((p,v),(q,u)) \in E, \forall c \in C     &(3)\\
&&& X_{pvc} \in \{0,1\}, && \forall p \in Q, \forall v \in Q_p, \forall c \in C         &(4)
\end{aligned}
\end{equation*}
}


\frame{\frametitle{Recoloring with ILP2}

Let $U$ be the set of uncolored nodes in uncolored clusters and $color[(p,v)]$ the color of the node $v$ in partition $p$.

\begin{equation*}
\scriptsize
\begin{aligned}
& \underset{Z}{\text{minimize}} && \sum_{p \in Q}\sum_{v \in Q_p}\sum_{c \in C} Z_{pvc}                                              &&&(1)\\
& \text{subject to} && Z_{pvc} \geq X_{quc}, && \forall ((p,v),(q,u))\in E : (p,v) \notin U, (q,u) \in U,\\&&&&& c=color[(p,v)]                                                            &(2)\\
&&& \sum_{v \in Q_p}\sum_{c \in C} X_{pvc}=1, && \forall p \in Q   &(3)\\
&&& X_{pvc}+X_{quc} \leq 1, && \forall ((p,v),(q,u)) \in E, \forall c \in C     &(4)\\
&&& X_{pvc} \in \{0,1\}, && \forall p \in Q, \forall v \in Q_p, \forall c \in C        &(5)
\end{aligned}
\end{equation*}

}

\subsection{Eliminating Conflicts: Tabusearch}
\begin{frame}[fragile]
\frametitle{Tabusearch: Outline}
\begin{enumerate}
\item Let $R$ be the set of clusters that has been recolored before.
\item Initialize $C$ with the set of conflicting clusters not in $R$.
\item Over all cluster in $C$, search for the node-color pair $(n,c)$ that produces the fewest conflicts and is not on the tabulist.
\item Select and color node $n$ with color $c$ and add $(n,c)$ to the tabulist.
\item Remove the cluster of node $n$ from $C$.
\item Add the clusters of all the produced conflicting nodes to set $C$.
\item If $C$ is not empty, go back to step 3.
\end{enumerate}
\end{frame}

%TODO resultate besser darstellen und vergleichen
\section{Results}
\subsection{Instances and Testing Environment}

\frame{
\frametitle{Instances and Testing Environment}

\begin{tabular}{ l | c || r }
  1 & 2 & 3 \\
  4 & 5 & 6 \\
  7 & 8 & 9 \\
\end{tabular}

}

\frame{\frametitle{Instances and Testing Environment}
\begin{enumerate}
\item Instances of Noronha, Ribiero

\begin{center}
\begin{tabular}{|c|c|c|c|c|}
\hline
\textbf{Instance} & \textbf{Nodes} & \textbf{Clusters} & \textbf{N/Cl} & \textbf{Density} \\
\hline
dsjc500.5-1.in & 500 & 500 & 1 & 0.5\\
\hline
dsjc500.5-2.in & 1000 & 500 & 2 & 0.5\\
\hline
dsjc500.5-3.in & 1500 & 500 & 3 & 0.5\\
\hline
dsjc500.5-4.in & 2000 & 500 & 4 & 0.5\\
\hline
\end{tabular}
\end{center}


\item Java implementation
\item System: Intel i5 DualCore 2.5GHz
\end{enumerate}
}

\frame{\frametitle{WiedereinfÃ¤rbung mit Random}
\begin{itemize}
\item 10 runs per instance
\item Tabusize: 0.002*nodes*colors
\item MaxIterations: 0.3*nodes*colors
\end{itemize}

\begin{center}
\begin{tabular}{|c|c|c|c|c|}
\hline
\textbf{Instance} & \textbf{avg Runtime} & \textbf{worst} & \textbf{avg} & \textbf{best} \\
\hline
dsjc500.5-1.in & 24.2 & 53 & 53.0 & 53\\
\hline
dsjc500.5-2.in & 73.3 & 48 & 48.0 & 48\\
\hline
dsjc500.5-3.in & 192.8 & 45 & 45.6 & 46\\
\hline
dsjc500.5-4.in & 211.6 & 44 & 44.0 & 44\\
\hline
\end{tabular}
\end{center}
}

\frame{\frametitle{WiedereinfÃ¤rbung mit OneStepCD}
\begin{itemize}
\item 10 runs per instance
\item Tabusize: 0.002*nodes*colors
\item MaxIterations: 0.3*nodes*colors
\end{itemize}

\begin{center}
\begin{tabular}{|c|c|c|c|c|}
\hline
\textbf{Instance} & \textbf{avg Runtime} & \textbf{worst} & \textbf{avg} & \textbf{best} \\
\hline
dsjc500.5-1.in & 19.1 & 53 & 53.0 & 53\\
\hline
dsjc500.5-2.in & 71.3 & 48 & 48.0 & 48\\
\hline
dsjc500.5-3.in & 199.0 & 45 & 45.6 & 46\\
\hline
dsjc500.5-4.in & 290.2 & 44 & 44.0 & 44\\
\hline
\end{tabular}
\end{center}
}

\frame{\frametitle{WiedereinfÃ¤rbung mit ILP1}
\begin{itemize}
\item 1 run per instance
\item Tabusize: 0.002*nodes*colors
\item MaxIterations: 0.3*nodes*colors
\end{itemize}

\begin{center}
\begin{tabular}{|c|c|c|c|c|}
\hline
\textbf{Instance} & \textbf{Runtime} & \textbf{Result}\\
\hline
dsjc500.5-1.in & 15.9 & 53\\
\hline
dsjc500.5-2.in & 57.2 & 48\\
\hline
dsjc500.5-3.in & 164.02 & 45\\
\hline
dsjc500.5-4.in & 347.26 & 44\\
\hline
\end{tabular}
\end{center}
}

\frame{\frametitle{WiedereinfÃ¤rbung mit ILP2}
\begin{itemize}
\item 1 run per instance
\item Tabusize: 0.002*nodes*colors
\item MaxIterations: 0.3*nodes*colors
\end{itemize}

\begin{center}
\begin{tabular}{|c|c|c|c|c|}
\hline
\textbf{Instance} & \textbf{Runtime} & \textbf{Result}\\
\hline
dsjc500.5-1.in & 121.02 & 53\\
\hline
dsjc500.5-2.in & 365.377 & 48\\
\hline
dsjc500.5-3.in & 964.729 & 45\\
\hline
dsjc500.5-4.in & 1058.115 & 44\\
\hline
\end{tabular}
\end{center}
}

\frame{\frametitle{Ergebnisse von Frota und Ribiero}
\begin{itemize}
\item 10 LÃ¤ufe pro Instanz
\item TabulÃ¤nge: verstehe ich noch immer nicht ganz
\item MaxIterations: auch noch nicht
\end{itemize}

\begin{center}
\begin{tabular}{|c|c|c|c|c|}
\hline
\textbf{Instance} & \textbf{Runtime} & \textbf{worst} & \textbf{avg} & \textbf{best} \\
\hline
dsjc500.5-1.in & 121.02 & 52 & 51.3 & 51\\
\hline
dsjc500.5-2.in & 365.377 & 46 & 45.9 & 45\\
\hline
dsjc500.5-3.in & 964.729 & 44 & 43.2 & 43\\
\hline
dsjc500.5-4.in & 1058.115 & 42 & 42.0 & 42\\
\hline
\end{tabular}
\end{center}
}


\section{Summary}
\frame{
\frametitle{Summary}
Main insight:
\begin{itemize}
\item optimizing the number of conflicting nodes does not lead to better results
\end{itemize}
}
\frame{
\frametitle{Advantages and disadvantages}
Advantages:
\begin{itemize}
\item low calculation time when recoloring randomly or using OneStepCD
\item good results compared to other heuristical methods
\end{itemize}
Disadvantages:
\begin{itemize}
\item Noronha and Ribiero's tabusearch search still performs slightly better
\end{itemize}
}
\frame{
\frametitle{Future Work}
\begin{itemize}
\item All node-color-combinations from all recently recolored clusters could be put on the tabulist for a number of iterations
\end{itemize}
}

\frame{
\frametitle{Discussion}
\begin{itemize}
\item Questions?
\end{itemize}
}


\begin{frame}[fragile]
\frametitle{Pseudocode}
\includegraphics[scale=0.25]{tabusearch.png}
\end{frame}


%\begin{frame}
%\bibliographystyle{unsrt}   % this means that the order of references
%			    % is dtermined by the order in which the
%			    % \cite and \nocite commands appear
%\bibliography{pcp}  % list here all the bibliographies that
%\end{frame}

\end{document}
